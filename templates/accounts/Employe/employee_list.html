{% extends 'base.html' %}
{% load static %}

{% block content %}
 {% if messages %}
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }}">{{ message }}</div>
    {% endfor %}
  {% endif %}
<div class="py-2">
  <h3 class="text-center mb-4">Employee List</h3>

  <!-- Filter & Add Button Row -->
  <div class="d-flex justify-content-center mb-3 gap-3 flex-wrap">
    <button class="btn btn-outline-primary" type="button" data-bs-toggle="collapse" data-bs-target="#filterCollapse" aria-expanded="false" aria-controls="filterCollapse">
      üîç Show/Hide Filter
    </button>
    <a href="{% url 'accounts:employee_create' %}" class="btn btn-primary btn-rounded px-4">Create New Employee </a>
  </div>

  <!-- Collapsible Filter Form -->
  <div class="collapse" id="filterCollapse">
    <form method="get" class="mb-4">
      <div class="row g-3">
        <div class="col-md-3">
          <input type="text" name="name" value="{{ name }}" class="form-control" placeholder="Name">
        </div>
        <div class="col-md-3">
          <input type="text" name="email" value="{{ email }}" class="form-control" placeholder="Email">
        </div>
        <div class="col-md-3">
          <input type="text" name="position" value="{{ position }}" class="form-control" placeholder="Position">
        </div>
        <div class="col-md-3 align-self-end d-flex gap-2">
          <button type="submit" class="btn btn-primary w-50">Apply</button>
          <a href="{% url 'accounts:employee_list' %}" class="btn btn-secondary w-50">Reset</a>
        </div>
      </div>
    </form>
  </div>

  <!-- Employee Table -->
  <div class="table-responsive">
    <table class="table table-striped table-hover align-middle text-center">
      <thead class="bg-primary text-white text-nowrap">
        <tr>
          <th>SL</th>
          <th>Name</th>
          <th>Email</th>
          <th>Address</th>
          <th>Phone</th>
          <th>Position</th>
          <th>Basic Salary</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for employee in employees %}
        <tr>
          <td>{{ forloop.counter }}</td>
          <td>{{ employee.name }}</td>
          <td>{{ employee.email }}</td>
          <td>{{ employee.address }}</td>
          <td>{{ employee.phone }}</td>
          <td>{{ employee.position }}</td>
          <td>‡ß≥{{ employee.basic_salary }}</td>
          <td class="text-nowrap">
            <a href="{% url 'accounts:employee_update' employee.id %}" class="btn btn-sm btn-info me-1">Edit</a>
            <a href="{% url 'accounts:employee_delete' employee.id %}" class="btn btn-sm btn-danger">Delete</a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="7" class="text-muted text-center">No employees found.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
